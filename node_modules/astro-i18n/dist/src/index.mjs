var J=(t,n,r)=>{if(!n.has(t))throw TypeError("Cannot "+r)};var h=(t,n,r)=>(J(t,n,"read from private field"),r?r.call(t):n.get(t)),C=(t,n,r)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,r)},$=(t,n,r,e)=>(J(t,n,"write to private field"),e?e.call(t,r):n.set(t,r),r);var at=(t,n,r)=>(J(t,n,"access private method"),r);import{fileURLToPath as Un}from"url";function m(t){return Object.getPrototypeOf(t)===Object.prototype}function k(t){return Array.isArray(t)&&t.every(n=>typeof n=="string")}function ft(t){if(!m(t))return!1;for(let n of Object.values(t))if(typeof n!="string")return!1;return!0}function ut(t){if(!m(t))throw new Error(`"${t}" is not of type Record<string, string>.`);for(let n of Object.values(t))if(typeof n!="string")throw new TypeError(`"${n}" is not of type string.`)}function Y(t,n){if(!t.includes(n))throw new Error(`${n} is not in [${t.join(", ")}].`)}function A(t){return Object.entries(t)}function lt(t,n,r){let e=t;for(let[o,i]of n.entries()){if(o===n.length-1){e[i]=r;break}if(!ct(e,i)){e[i]={},e=e[i];continue}if(Object.getPrototypeOf(e[i])===Object.prototype){e=e[i];continue}break}}function y(t,n,r){let{mode:e,modifyBase:o}={mode:"replace",modifyBase:!0,...r},i=o?t:H(t);for(let[a,s]of A(n)){let f=i[a];if(ct(i,a)){m(f)&&m(s)?y(f,s):e==="replace"&&(i[a]=n[a]);continue}i[a]=n[a]}return i}function H(t){return!t||typeof t!="object"?t:Array.isArray(t)?t.map(n=>typeof n=="object"?H(n):n):A(t).reduce((n,[r,e])=>{let o=n;return o[r]=H(e),n},{})}function ct(t,n){return Object.prototype.hasOwnProperty.call(t,n)}import Zt from"get-file-exports";import{readdirSync as Bt}from"fs";import{join as qt}from"path";import{readFileSync as Gt,existsSync as Z,lstatSync as _,readdirSync as Wt,mkdirSync as Bn,writeFileSync as qn}from"fs";import{join as pt,sep as Qn}from"path";function I(t){try{return JSON.parse(Gt(t,"utf8"))}catch{return}}function B(t,n,r=[]){try{let e=Wt(t);for(let o=0;o<e.length;o+=1){let i=pt(t,e[o]);r.some(a=>a.test(i))?(e.splice(o,1),o-=1):N(i,!1)&&B(i,n)}n(e,t)}catch{}}function N(t,n=!0){return n?Z(t)&&_(t).isDirectory():_(t).isDirectory()}function q(t,n=!0){return n?Z(t)&&!_(t).isDirectory():!_(t).isDirectory()}function L(...t){let n=pt(...t);if(!Z(n))throw new ReferenceError(`Path: ${n} doesn't exist.`);return n}function gt(t){let n=t.lastIndexOf(".");return n<0?[t,""]:[t.slice(0,n),t.slice(n+1)]}function dt(t){let n=t.lastIndexOf(".");return n<0?"":t.slice(n+1).toLowerCase()}function mt(t){let n=t.lastIndexOf(".");return n<0?t:t.slice(0,n)}function Tt(t){let n=t.lastIndexOf(".");return n<0?[t,""]:[t.slice(0,n),t.slice(n+1)]}var c="astro.i18n.config",F=".astro",j="i18n",b="{route}",Kt="astro-i18n";var w=".",Jt=`.${Kt}`;var ht=":",X="|",yt=",",xt=":";function At(t){if(!m(t))throw new TypeError(`${c} is not an object literal.`);if(t.defaultLangCode&&typeof t.defaultLangCode!="string")throw new TypeError(`${c}.defaultLangCode must be of type string.`);if(t.supportedLangCodes&&!k(t.supportedLangCodes))throw new TypeError(`${c}.supportedLangCodes must be an array of strings.`);if(t.showDefaultLangCode!==void 0&&typeof t.showDefaultLangCode!="boolean")throw new TypeError(`${c}.showDefaultLangCode must be of type boolean.`);if(t.trailingSlash!==void 0&&!(t.trailingSlash=="always"||t.trailingSlash=="never"))throw new TypeError(`${c}.trailingSlash must be "always" or "never".`);t.translations&&Yt(t.translations,t.defaultLangCode,t.supportedLangCodes),t.routeTranslations&&Ht(t.routeTranslations,t.defaultLangCode)}function Yt(t,n,r){if(!m(t))throw new TypeError(`${c}.translations must be an object literal.`);let e=[];typeof n=="string"&&e.push(n),k(r)&&e.push(...r);for(let[o,i]of Object.entries(t)){if(e.length>0&&!e.includes(o))throw new TypeError(`${c}.translations.${o}, unsupported lang code.
Add "${o}" to ${c}.supportedLangCodes or ${c}.defaultLangCode).`);if(typeof i!="string"){if(!m(i))throw new TypeError(`${c}.translations.${o} must be either a translation object or a (string) path to a json one.`);for(let[,a]of Object.entries(i))Rt(a)}}}function Ht(t,n){if(!m(t))throw new TypeError(`${c}.routeTranslations must be an object literal.`);let r=[];k(n)&&r.push(...n);for(let[e,o]of Object.entries(t)){if(r.length>0&&!r.includes(e))throw new TypeError(`${c}.routeTranslations.${e}, unsupported lang code.
Add "${e}" to ${c}.supportedLangCodes).`);if(typeof o!="string"&&!ft(o))throw new TypeError(`${c}.routeTranslations.${e} must be either a Record<string, string> or a (string) path to a json one.`)}}function D(t){if(typeof t=="string")return!0;if(!m(t))return!1;for(let n of Object.values(t))if(!D(n))return!1;return!0}function Rt(t){if(typeof t!="string"){if(!m(t))throw new TypeError(`"${t}" must be either a string or a translation object.`);for(let n of Object.values(t))Rt(n)}}var Et=new Set(["json","js","cjs","mjs","ts","cts","mts"]),Xt={defaultLangCode:"en",supportedLangCodes:[],showDefaultLangCode:!1,trailingSlash:"never",translations:{},routeTranslations:{}};function Q(){return{...Xt}}function Qt(t){return t}async function Ot(t,n=""){let r=tn(t,n),e=r.endsWith(".json")?I(r):(await Zt(r)).default;return At(e),nn(e,t)}function tn(t,n=""){if(n){if(!q(n))throw new Error(`${n} is not an astro-i18n config file.`);let r=dt(n);if(!Et.has(r))throw new Error(`The astro-i18n config file must be a JavaScript or TypeScript file (found "${r}").`);return n}if(!N(t))throw new Error(`${t} is not the project's root directory.`);for(let r of Bt(t)){let[e,o]=Tt(r);if(!!Et.has(o)&&e===c)return qt(t,r)}throw new Error(`Could not resolve the astro-i18n config file, verify that you have a ${c}<.js/.ts> file in your project root directory "${t}".`)}function nn({defaultLangCode:t,supportedLangCodes:n,showDefaultLangCode:r,trailingSlash:e,translations:o,routeTranslations:i}={},a=""){let s=Q();if(t&&(s.defaultLangCode=t),n&&(s.supportedLangCodes=n),r!==void 0&&(s.showDefaultLangCode=r),e&&(s.trailingSlash=e),a){let f=[s.defaultLangCode,...s.supportedLangCodes];o&&(s.translations=rn(o,f,a)),i&&(s.routeTranslations=en(i,f,a))}for(let f of s.supportedLangCodes)s.routeTranslations[f]||(s.routeTranslations[f]={});for(let f of[s.defaultLangCode,...s.supportedLangCodes])s.translations[f]||(s.translations[f]={});return s}function rn(t,n,r){let e={};for(let[o,i]of A(t))if(Y(n,o),typeof i=="string"){let a=L(r,i),s=I(a);if(!s)throw new Error(`Failed to load astroI18nConfig.translations.${o} (${a}), make sure that it's valid JSON.`);if(!D(s)||typeof s=="string")throw new TypeError(`astroI18nConfig.translations.${o} is not a valid translation object.`);e[o]=s}else e[o]=i;return e}function en(t,n,r){let e={};for(let[o,i]of A(t))if(Y(n,o),typeof i=="string"){let a=L(r,i),s=I(a);if(!s)throw new Error(`Failed to load astroI18nConfig.routeTranslation.${o} (${a}), make sure that it's valid JSON.`);ut(s),e[o]=s}else e[o]=i;return e}import{readdirSync as fn,readFileSync as Lt}from"fs";import{join as nt,sep as R}from"path";var on={\u00C1:"A",\u0102:"A",\u1EAE:"A",\u1EB6:"A",\u1EB0:"A",\u1EB2:"A",\u1EB4:"A",\u01CD:"A",\u00C2:"A",\u1EA4:"A",\u1EAC:"A",\u1EA6:"A",\u1EA8:"A",\u1EAA:"A",\u00C4:"A",\u01DE:"A",\u0226:"A",\u01E0:"A",\u1EA0:"A",\u0200:"A",\u00C0:"A",\u1EA2:"A",\u0202:"A",\u0100:"A",\u0104:"A",\u00C5:"A",\u01FA:"A",\u1E00:"A","\u023A":"A",\u00C3:"A","\uA732":"AA",\u00C6:"AE",\u01FC:"AE",\u01E2:"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY",\u1E02:"B",\u1E04:"B",\u0181:"B",\u1E06:"B","\u0243":"B",\u0182:"B",\u0106:"C",\u010C:"C",\u00C7:"C",\u1E08:"C",\u0108:"C",\u010A:"C",\u0187:"C","\u023B":"C",\u010E:"D",\u1E10:"D",\u1E12:"D",\u1E0A:"D",\u1E0C:"D",\u018A:"D",\u1E0E:"D",\u01F2:"D",\u01C5:"D",\u0110:"D",\u018B:"D",\u01F1:"DZ",\u01C4:"DZ",\u00C9:"E",\u0114:"E",\u011A:"E",\u0228:"E",\u1E1C:"E",\u00CA:"E",\u1EBE:"E",\u1EC6:"E",\u1EC0:"E",\u1EC2:"E",\u1EC4:"E",\u1E18:"E",\u00CB:"E",\u0116:"E",\u1EB8:"E",\u0204:"E",\u00C8:"E",\u1EBA:"E",\u0206:"E",\u0112:"E",\u1E16:"E",\u1E14:"E",\u0118:"E","\u0246":"E",\u1EBC:"E",\u1E1A:"E","\uA76A":"ET",\u1E1E:"F",\u0191:"F",\u01F4:"G",\u011E:"G",\u01E6:"G",\u0122:"G",\u011C:"G",\u0120:"G",\u0193:"G",\u1E20:"G",\u01E4:"G",\u1E2A:"H",\u021E:"H",\u1E28:"H",\u0124:"H","\u2C67":"H",\u1E26:"H",\u1E22:"H",\u1E24:"H",\u0126:"H",\u00CD:"I",\u012C:"I",\u01CF:"I",\u00CE:"I",\u00CF:"I",\u1E2E:"I",\u0130:"I",\u1ECA:"I",\u0208:"I",\u00CC:"I",\u1EC8:"I",\u020A:"I",\u012A:"I",\u012E:"I",\u0197:"I",\u0128:"I",\u1E2C:"I","\uA779":"D","\uA77B":"F","\uA77D":"G","\uA782":"R","\uA784":"S","\uA786":"T","\uA76C":"IS",\u0134:"J","\u0248":"J",\u1E30:"K",\u01E8:"K",\u0136:"K","\u2C69":"K","\uA742":"K",\u1E32:"K",\u0198:"K",\u1E34:"K","\uA740":"K","\uA744":"K",\u0139:"L","\u023D":"L",\u013D:"L",\u013B:"L",\u1E3C:"L",\u1E36:"L",\u1E38:"L","\u2C60":"L","\uA748":"L",\u1E3A:"L",\u013F:"L","\u2C62":"L",\u01C8:"L",\u0141:"L",\u01C7:"LJ",\u1E3E:"M",\u1E40:"M",\u1E42:"M","\u2C6E":"M",\u0143:"N",\u0147:"N",\u0145:"N",\u1E4A:"N",\u1E44:"N",\u1E46:"N",\u01F8:"N",\u019D:"N",\u1E48:"N","\u0220":"N",\u01CB:"N",\u00D1:"N",\u01CA:"NJ",\u00D3:"O",\u014E:"O",\u01D1:"O",\u00D4:"O",\u1ED0:"O",\u1ED8:"O",\u1ED2:"O",\u1ED4:"O",\u1ED6:"O",\u00D6:"O",\u022A:"O",\u022E:"O",\u0230:"O",\u1ECC:"O",\u0150:"O",\u020C:"O",\u00D2:"O",\u1ECE:"O",\u01A0:"O",\u1EDA:"O",\u1EE2:"O",\u1EDC:"O",\u1EDE:"O",\u1EE0:"O",\u020E:"O","\uA74A":"O","\uA74C":"O",\u014C:"O",\u1E52:"O",\u1E50:"O",\u019F:"O",\u01EA:"O",\u01EC:"O",\u00D8:"O",\u01FE:"O",\u00D5:"O",\u1E4C:"O",\u1E4E:"O",\u022C:"O",\u01A2:"OI","\uA74E":"OO",\u0190:"E",\u0186:"O",\u0222:"OU",\u1E54:"P",\u1E56:"P","\uA752":"P",\u01A4:"P","\uA754":"P","\u2C63":"P","\uA750":"P","\uA758":"Q","\uA756":"Q",\u0154:"R",\u0158:"R",\u0156:"R",\u1E58:"R",\u1E5A:"R",\u1E5C:"R",\u0210:"R",\u0212:"R",\u1E5E:"R","\u024C":"R","\u2C64":"R","\uA73E":"C",\u018E:"E",\u015A:"S",\u1E64:"S",\u0160:"S",\u1E66:"S",\u015E:"S",\u015C:"S",\u0218:"S",\u1E60:"S",\u1E62:"S",\u1E68:"S",\u0164:"T",\u0162:"T",\u1E70:"T",\u021A:"T","\u023E":"T",\u1E6A:"T",\u1E6C:"T",\u01AC:"T",\u1E6E:"T",\u01AE:"T",\u0166:"T","\u2C6F":"A","\uA780":"L",\u019C:"M","\u0245":"V","\uA728":"TZ",\u00DA:"U",\u016C:"U",\u01D3:"U",\u00DB:"U",\u1E76:"U",\u00DC:"U",\u01D7:"U",\u01D9:"U",\u01DB:"U",\u01D5:"U",\u1E72:"U",\u1EE4:"U",\u0170:"U",\u0214:"U",\u00D9:"U",\u1EE6:"U",\u01AF:"U",\u1EE8:"U",\u1EF0:"U",\u1EEA:"U",\u1EEC:"U",\u1EEE:"U",\u0216:"U",\u016A:"U",\u1E7A:"U",\u0172:"U",\u016E:"U",\u0168:"U",\u1E78:"U",\u1E74:"U","\uA75E":"V",\u1E7E:"V",\u01B2:"V",\u1E7C:"V","\uA760":"VY",\u1E82:"W",\u0174:"W",\u1E84:"W",\u1E86:"W",\u1E88:"W",\u1E80:"W","\u2C72":"W",\u1E8C:"X",\u1E8A:"X",\u00DD:"Y",\u0176:"Y",\u0178:"Y",\u1E8E:"Y",\u1EF4:"Y",\u1EF2:"Y",\u01B3:"Y",\u1EF6:"Y","\u1EFE":"Y",\u0232:"Y","\u024E":"Y",\u1EF8:"Y",\u0179:"Z",\u017D:"Z",\u1E90:"Z","\u2C6B":"Z",\u017B:"Z",\u1E92:"Z",\u0224:"Z",\u1E94:"Z",\u01B5:"Z",\u0132:"IJ",\u0152:"OE","\u1D00":"A","\u1D01":"AE",\u0299:"B","\u1D03":"B","\u1D04":"C","\u1D05":"D","\u1D07":"E","\uA730":"F",\u0262:"G",\u029B:"G",\u029C:"H",\u026A:"I",\u0281:"R","\u1D0A":"J","\u1D0B":"K",\u029F:"L","\u1D0C":"L","\u1D0D":"M",\u0274:"N","\u1D0F":"O",\u0276:"OE","\u1D10":"O","\u1D15":"OU","\u1D18":"P",\u0280:"R","\u1D0E":"N","\u1D19":"R","\uA731":"S","\u1D1B":"T","\u2C7B":"E","\u1D1A":"R","\u1D1C":"U","\u1D20":"V","\u1D21":"W",\u028F:"Y","\u1D22":"Z",\u00E1:"a",\u0103:"a",\u1EAF:"a",\u1EB7:"a",\u1EB1:"a",\u1EB3:"a",\u1EB5:"a",\u01CE:"a",\u00E2:"a",\u1EA5:"a",\u1EAD:"a",\u1EA7:"a",\u1EA9:"a",\u1EAB:"a",\u00E4:"a",\u01DF:"a",\u0227:"a",\u01E1:"a",\u1EA1:"a",\u0201:"a",\u00E0:"a",\u1EA3:"a",\u0203:"a",\u0101:"a",\u0105:"a","\u1D8F":"a",\u1E9A:"a",\u00E5:"a",\u01FB:"a",\u1E01:"a","\u2C65":"a",\u00E3:"a","\uA733":"aa",\u00E6:"ae",\u01FD:"ae",\u01E3:"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay",\u1E03:"b",\u1E05:"b",\u0253:"b",\u1E07:"b","\u1D6C":"b","\u1D80":"b",\u0180:"b",\u0183:"b",\u0275:"o",\u0107:"c",\u010D:"c",\u00E7:"c",\u1E09:"c",\u0109:"c",\u0255:"c",\u010B:"c",\u0188:"c","\u023C":"c",\u010F:"d",\u1E11:"d",\u1E13:"d","\u0221":"d",\u1E0B:"d",\u1E0D:"d",\u0257:"d","\u1D91":"d",\u1E0F:"d","\u1D6D":"d","\u1D81":"d",\u0111:"d",\u0256:"d",\u018C:"d",\u0131:"i","\u0237":"j",\u025F:"j",\u0284:"j",\u01F3:"dz",\u01C6:"dz",\u00E9:"e",\u0115:"e",\u011B:"e",\u0229:"e",\u1E1D:"e",\u00EA:"e",\u1EBF:"e",\u1EC7:"e",\u1EC1:"e",\u1EC3:"e",\u1EC5:"e",\u1E19:"e",\u00EB:"e",\u0117:"e",\u1EB9:"e",\u0205:"e",\u00E8:"e",\u1EBB:"e",\u0207:"e",\u0113:"e",\u1E17:"e",\u1E15:"e","\u2C78":"e",\u0119:"e","\u1D92":"e","\u0247":"e",\u1EBD:"e",\u1E1B:"e","\uA76B":"et",\u1E1F:"f",\u0192:"f","\u1D6E":"f","\u1D82":"f",\u01F5:"g",\u011F:"g",\u01E7:"g",\u0123:"g",\u011D:"g",\u0121:"g",\u0260:"g",\u1E21:"g","\u1D83":"g",\u01E5:"g",\u1E2B:"h",\u021F:"h",\u1E29:"h",\u0125:"h","\u2C68":"h",\u1E27:"h",\u1E23:"h",\u1E25:"h",\u0266:"h",\u1E96:"h",\u0127:"h",\u0195:"hv",\u00ED:"i",\u012D:"i",\u01D0:"i",\u00EE:"i",\u00EF:"i",\u1E2F:"i",\u1ECB:"i",\u0209:"i",\u00EC:"i",\u1EC9:"i",\u020B:"i",\u012B:"i",\u012F:"i","\u1D96":"i",\u0268:"i",\u0129:"i",\u1E2D:"i","\uA77A":"d","\uA77C":"f","\u1D79":"g","\uA783":"r","\uA785":"s","\uA787":"t","\uA76D":"is",\u01F0:"j",\u0135:"j",\u029D:"j","\u0249":"j",\u1E31:"k",\u01E9:"k",\u0137:"k","\u2C6A":"k","\uA743":"k",\u1E33:"k",\u0199:"k",\u1E35:"k","\u1D84":"k","\uA741":"k","\uA745":"k",\u013A:"l",\u019A:"l",\u026C:"l",\u013E:"l",\u013C:"l",\u1E3D:"l","\u0234":"l",\u1E37:"l",\u1E39:"l","\u2C61":"l","\uA749":"l",\u1E3B:"l",\u0140:"l",\u026B:"l","\u1D85":"l",\u026D:"l",\u0142:"l",\u01C9:"lj",\u017F:"s","\u1E9C":"s",\u1E9B:"s","\u1E9D":"s",\u1E3F:"m",\u1E41:"m",\u1E43:"m",\u0271:"m","\u1D6F":"m","\u1D86":"m",\u0144:"n",\u0148:"n",\u0146:"n",\u1E4B:"n","\u0235":"n",\u1E45:"n",\u1E47:"n",\u01F9:"n",\u0272:"n",\u1E49:"n",\u019E:"n","\u1D70":"n","\u1D87":"n",\u0273:"n",\u00F1:"n",\u01CC:"nj",\u00F3:"o",\u014F:"o",\u01D2:"o",\u00F4:"o",\u1ED1:"o",\u1ED9:"o",\u1ED3:"o",\u1ED5:"o",\u1ED7:"o",\u00F6:"o",\u022B:"o",\u022F:"o",\u0231:"o",\u1ECD:"o",\u0151:"o",\u020D:"o",\u00F2:"o",\u1ECF:"o",\u01A1:"o",\u1EDB:"o",\u1EE3:"o",\u1EDD:"o",\u1EDF:"o",\u1EE1:"o",\u020F:"o","\uA74B":"o","\uA74D":"o","\u2C7A":"o",\u014D:"o",\u1E53:"o",\u1E51:"o",\u01EB:"o",\u01ED:"o",\u00F8:"o",\u01FF:"o",\u00F5:"o",\u1E4D:"o",\u1E4F:"o",\u022D:"o",\u01A3:"oi","\uA74F":"oo",\u025B:"e","\u1D93":"e",\u0254:"o","\u1D97":"o",\u0223:"ou",\u1E55:"p",\u1E57:"p","\uA753":"p",\u01A5:"p","\u1D71":"p","\u1D88":"p","\uA755":"p","\u1D7D":"p","\uA751":"p","\uA759":"q",\u02A0:"q","\u024B":"q","\uA757":"q",\u0155:"r",\u0159:"r",\u0157:"r",\u1E59:"r",\u1E5B:"r",\u1E5D:"r",\u0211:"r",\u027E:"r","\u1D73":"r",\u0213:"r",\u1E5F:"r",\u027C:"r","\u1D72":"r","\u1D89":"r","\u024D":"r",\u027D:"r","\u2184":"c","\uA73F":"c",\u0258:"e",\u027F:"r",\u015B:"s",\u1E65:"s",\u0161:"s",\u1E67:"s",\u015F:"s",\u015D:"s",\u0219:"s",\u1E61:"s",\u1E63:"s",\u1E69:"s",\u0282:"s","\u1D74":"s","\u1D8A":"s","\u023F":"s",\u0261:"g","\u1D11":"o","\u1D13":"o","\u1D1D":"u",\u0165:"t",\u0163:"t",\u1E71:"t",\u021B:"t","\u0236":"t",\u1E97:"t","\u2C66":"t",\u1E6B:"t",\u1E6D:"t",\u01AD:"t",\u1E6F:"t","\u1D75":"t",\u01AB:"t",\u0288:"t",\u0167:"t","\u1D7A":"th",\u0250:"a","\u1D02":"ae",\u01DD:"e","\u1D77":"g",\u0265:"h","\u02AE":"h","\u02AF":"h","\u1D09":"i",\u029E:"k","\uA781":"l",\u026F:"m",\u0270:"m","\u1D14":"oe",\u0279:"r",\u027B:"r",\u027A:"r","\u2C79":"r",\u0287:"t",\u028C:"v",\u028D:"w",\u028E:"y","\uA729":"tz",\u00FA:"u",\u016D:"u",\u01D4:"u",\u00FB:"u",\u1E77:"u",\u00FC:"u",\u01D8:"u",\u01DA:"u",\u01DC:"u",\u01D6:"u",\u1E73:"u",\u1EE5:"u",\u0171:"u",\u0215:"u",\u00F9:"u",\u1EE7:"u",\u01B0:"u",\u1EE9:"u",\u1EF1:"u",\u1EEB:"u",\u1EED:"u",\u1EEF:"u",\u0217:"u",\u016B:"u",\u1E7B:"u",\u0173:"u","\u1D99":"u",\u016F:"u",\u0169:"u",\u1E79:"u",\u1E75:"u","\u1D6B":"ue","\uA778":"um","\u2C74":"v","\uA75F":"v",\u1E7F:"v",\u028B:"v","\u1D8C":"v","\u2C71":"v",\u1E7D:"v","\uA761":"vy",\u1E83:"w",\u0175:"w",\u1E85:"w",\u1E87:"w",\u1E89:"w",\u1E81:"w","\u2C73":"w",\u1E98:"w",\u1E8D:"x",\u1E8B:"x","\u1D8D":"x",\u00FD:"y",\u0177:"y",\u00FF:"y",\u1E8F:"y",\u1EF5:"y",\u1EF3:"y",\u01B4:"y",\u1EF7:"y","\u1EFF":"y",\u0233:"y",\u1E99:"y","\u024F":"y",\u1EF9:"y",\u017A:"z",\u017E:"z",\u1E91:"z",\u0291:"z","\u2C6C":"z",\u017C:"z",\u1E93:"z",\u0225:"z",\u1E95:"z","\u1D76":"z","\u1D8E":"z",\u0290:"z",\u01B6:"z","\u0240":"z",\uFB00:"ff",\uFB03:"ffi",\uFB04:"ffl",\uFB01:"fi",\uFB02:"fl",\u0133:"ij",\u0153:"oe",\uFB06:"st","\u2090":"a","\u2091":"e","\u1D62":"i","\u2C7C":"j","\u2092":"o","\u1D63":"r","\u1D64":"u","\u2093":"x","\u1D65":"v"},Ct=on;function tt(t,n,r=!1){return[t.slice(0,n),t.slice(n+Number(r))]}function It(t,n){return t.startsWith(n)?t.slice(n.length):t}function wt(t,n){return t.endsWith(n)?t.slice(0,-n.length):t}function St(t,n){return wt(It(t,n),n)}function M(t,n){let r=t.exec(n);if(!r)return null;let e={range:[r.index,r.index+r[0].length],match:[...r]};return t.lastIndex=0,e}function U(t,n,r,e){return`${t.slice(0,n)}${e}${t.slice(r)}`}function Pt(t,n){if(!t.flags.includes("g"))throw new Error(`Cannot exec over \`/${t.source}/\` without the "g" flag.`);let r=[],e;for(;e!==null;)(e==null?void 0:e.index)!==void 0&&r.push({range:[e.index,e.index+e[0].length],match:[...e]}),e=t.exec(n);return r}function sn(t){let n="";for(let r of t)n+=Ct[r]||r;return n}var an=new Set("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");function $t(t){let n="";for(let r of sn(t).toLowerCase())r===" "&&(n+="-"),an.has(r)&&(n+=r);return n}function un(){return nt("src","pages")}function Ft(t,n){let{defaultLangCode:r,supportedLangCodes:e}=n,o=L(t,un()),i={},a=Nt([r,...e]),s=Nt(e),f=Tn(o,n);return B(o,(p,x)=>{for(let u of p){let g=nt(x,u),T=g.replace(o,""),l=N(g)?gn(T):cn(T);if(!l)continue;let K=pn(T);if(i[l]||(i[l]={name:K,route:l,path:"",hasGetStaticPaths:!1,hasPrerender:!1}),g.endsWith(F))i[l].path=T,i[l].hasGetStaticPaths=dn(g),i[l].hasPrerender=mn(g),i[l].name=K;else{let{pageTranslations:vt,pageRouteTranslations:zt}=ln(g,l,K,n);y(a,vt),y(s,zt)}}},f),{directory:o,pages:Object.values(i).filter(p=>!!p.path),translations:a,routeTranslations:s}}function ln(t,n,r,{defaultLangCode:e,supportedLangCodes:o}){let i={},a={},s=new Set([e,...o]);for(let f of fn(t)){let[p,x]=gt(f);if(x!=="json"||!s.has(p))continue;let u=I(nt(t,f));if(typeof u=="string"||!D(u))continue;u[b]!==void 0&&(typeof u[b]=="string"&&lt(a,[p,r],u[b]),delete u[b]);let g=u,T=["index",...n.split("/").filter(l=>!!l)];for(let l=T.length-1;l>-1;l-=1)g={[T[l]]:g};i[p]=g}return{pageTranslations:i,pageRouteTranslations:a}}function cn(t){let n=t.split(R),r=n.at(-1)??"",e=r.lastIndexOf(".");if(e<0)return;let[o,i]=tt(r,e);if(i===F)return o==="index"?n.pop():n[n.length-1]=o,n.join("/")||"/"}function pn(t){let n=t.split(R);return n.at(-1)===`index${F}`||n.at(-1)===j?n.at(-2)||"index":mt(n.at(-1)||"unknown")}function gn(t){let n=t.split(R),r=n.at(-1)??"";r===j&&(r=`index.${j}`);let e=r.lastIndexOf(".");if(e<0)return;let[o,i]=tt(r,e,!0);if(i===j)return o==="index"?n.pop():n[n.length-1]=o,n.join("/")||"/"}function dn(t){try{let n=Lt(t,"utf8");return["export function getStaticPaths","export async function getStaticPaths","export const getStaticPaths","export { getStaticPaths }","export {getStaticPaths}"].some(r=>n.includes(r))}catch{return!1}}function mn(t){try{let n=Lt(t,"utf8");return["export const prerender","export let prerender","export var prerender","export { prerender }","export {prerender}"].some(r=>n.includes(r))}catch{return!1}}function Tn(t,{showDefaultLangCode:n,defaultLangCode:r,supportedLangCodes:e}){let o;return n?o=[hn(r,t)]:o=[...e,r].map(a=>yn(a,t)),o}function hn(t,n=""){let r=R==="/"?R:"\\\\",e=n;return e.at(-1)!==R&&(e=`${e}${r}`),new RegExp(`${e}(?!(${t}$)|(${t}${r}(.+)?))`)}function yn(t,n=""){let r=R==="/"?R:"\\\\",e=n;return e.at(-1)!==R&&(e=`${e}${r}`),new RegExp(`${e}(?=(${t}$)|(${t}${r}(.+)?))`)}function Nt(t){let n={};for(let r of t)n[r]={};return n}function jt(t){if(typeof t=="number")return t;if(typeof t=="string"){let n=Number.parseFloat(t);if(!Number.isNaN(n))return n}}function bt(t){let n=typeof t=="string"||typeof t=="number"?new Date(t):t;if(n instanceof Date&&!Number.isNaN(n.getTime()))return n}function V(t,n){var r;return(r=t.match(new RegExp(`/?(${n.join("|")})(?:/.*)?$`)))==null?void 0:r[1]}function xn(t,n,r=d.langCode,e=""){let{langCodes:o,defaultLangCode:i,showDefaultLangCode:a,trailingSlash:s}=d,{fullRouteTranslations:f}=d.internals(),p=St(t,"/").split("/");o.includes(p[0])&&p.shift();let x=e||Rn(p,f)||i,u=p.map(g=>{var T,l;return(l=(T=f[x])==null?void 0:T[g])!=null&&l[r]?f[x][g][r]:g}).join("/");if(n)for(let[g,T]of Object.entries(n))u=u.replace(`[${g}]`,T);return(a||r!==i)&&(u=`${r}/${u}`),s==="always"&&!u.endsWith("/")&&(u=`${u}/`),u.startsWith("/")||(u=`/${u}`),u}function An(t,n){let r=new URLSearchParams(n).toString();return r?`${t}?${r}`:t}function v({defaultLangCode:t,routeTranslations:n}){let r={[t]:{}},e=Object.entries(n).filter(([o])=>o!==t);for(let[o,i]of e){r[o]={};let a=e.filter(([s])=>s!==o);for(let[s,f]of Object.entries(i)){r[t][s]||(r[t][s]={}),r[t][s][o]=f,r[o][f]={[t]:s};for(let[p,x]of a)x[s]&&(r[o][f][p]=x[s])}}return r}function Rn(t,n){var o;let r={};for(let i of t)for(let[a,s]of Object.entries(n))r[a]||(r[a]=0),s[i]&&(r[a]+=1);return(o=Object.entries(r).filter(([i,a],s,f)=>f.findIndex(([p,x])=>p!==i&&x===a)===-1).sort((i,a)=>a[1]-i[1]).at(0))==null?void 0:o[0]}var S,P,E,O,z,Dt,rt=class{constructor(){C(this,z);C(this,S,{});C(this,P,{});C(this,E,void 0);C(this,O,{number:(n,r={},e=h(this,E))=>{if(typeof e!="string"||typeof r!="object"||!r)return String(n);let o=jt(n);return o===void 0?String(n):new Intl.NumberFormat(e,r).format(o)},date:(n,r={},e=h(this,E))=>{if(typeof e!="string"||typeof r!="object"||!r)return String(n);let o=bt(n);return o===void 0?String(n):new Intl.DateTimeFormat(e,r).format(o)}});let n=Q();this.defaultLangCode=n.defaultLangCode,this.supportedLangCodes=n.supportedLangCodes,this.showDefaultLangCode=n.showDefaultLangCode,this.trailingSlash=n.trailingSlash,this.translations=n.translations,this.routeTranslations=n.routeTranslations,$(this,E,this.defaultLangCode)}get langCodes(){return[this.defaultLangCode,...this.supportedLangCodes]}get langCode(){return h(this,E)}set langCode(n){if(!this.langCodes.includes(n))throw new Error(`Cannot set langCode to "${n}". "${n}" is not not supported, did you add it to the astro-i18n config file ?`);$(this,E,n)}get formatters(){return h(this,O)}internals(){return{init:at(this,z,Dt).bind(this),translationVariants:h(this,P),fullRouteTranslations:h(this,S)}}addTranslations(n){let r=G(n);y(this.translations,n),y(h(this,P),r)}addRouteTranslations(n){let r=v({...this,routeTranslations:n});y(this.routeTranslations,n),y(h(this,S),r)}getFormatter(n){return h(this,O)[n]}setFormatter(n,r){h(this,O)[n]=r}deleteFormatter(n){delete h(this,O)[n]}init(n,r){let e=V(n.url.pathname,this.langCodes);if(e&&!this.langCodes.includes(e)&&(e=this.defaultLangCode),this.langCode=e||this.defaultLangCode,r)for(let[o,i]of Object.entries(r))this.setFormatter(o,i)}};S=new WeakMap,P=new WeakMap,E=new WeakMap,O=new WeakMap,z=new WeakSet,Dt=function(n,r={},e={}){for(let[o,i]of A(n))this[o]!==void 0&&(this[o]=i);$(this,S,e),$(this,P,r)};var En=new rt,d=En;var W=/{([\dA-Za-z]+:[^}]+)}/g,On=/{([\dA-Za-z]+)(:[^|}]+)?(|[^}]+)}/g,Ut=/[\dA-Za-z]+/,Cn=/^["'].+["']$/,In=/^-? ?\d+(.\d+)?$/;function kt(t){let n=wn(t);return n?{name:t.replace(W,""),variant:n}:{name:t,variant:{name:t,properties:[]}}}function wn(t){let n=M(W,t);if(!n)return;let{match:r}=n;if(!r[1])return;let e=[];for(let o of r[1].split(yt)){let[i,a]=o.split(xt).map(f=>f.trim());if(i===o||!Ut.test(i))continue;let s=ot(a);typeof s!="string"&&typeof s!="number"||e.push({name:i,value:s})}return{name:t,properties:e}}function et(t){let n=[],r=t.matchAll(On);for(let e of r){let o=Sn(e);o&&n.push(o)}return n.sort((e,o)=>o.range[1]-e.range[1])}function Sn(t){if(t.index===void 0)return;let n={name:"",default:void 0,formatters:[],range:[t.index,t.index+t[0].length]};for(let r=1;r<t.length;r+=1)!t[r]||(r===1&&(n.name=t[r]),r===2&&(n.default=Pn(t[r])),r===3&&(n.formatters=$n(t[r])));if(n.name)return n}function Pn(t){if(t[0]===ht)return ot(t.slice(1))}function $n(t){return t[0]!==X?[]:t.split(X).filter(n=>!!n).map(n=>{if(!/[\dA-Za-z]+\(.+\)/.test(n))return{name:n,arguments:[]};let r=n.indexOf("(");return{name:n.slice(0,r),arguments:n.slice(r+1,n.lastIndexOf(")")).split(",").map(o=>Nn(o.trim()))}})}function Nn(t){let n=ot(t,!1);return n&&typeof n=="object"&&Ut.test(t)?{getter:r=>r==null?void 0:r[n.name],name:n.name}:{getter:()=>n}}function ot(t,n=!0){if(t==="null")return null;if(t==="undefined")return;if(t==="true")return!0;if(t==="false")return!1;let r=t.match(Cn);if(r)return r[0].slice(1).slice(0,-1);if(r=t.match(In),r)return Number.parseFloat(r[0].replace(" ",""));if(n)throw new Error(`Could not parse "${t}" (not a primitive).`);return{name:t}}function Ln(t,n,r=d.langCode){if(!n)return Mt(t,r);let e=Mt(Fn(t,d.internals().translationVariants,n),r);return bn(e,n)}function G(t){let n={},r=new Set;return it(t,(e,{variant:o})=>{if(!o)return;let i=Vt(e,o);r.has(i)||(n[e]||(n[e]=[]),n[e].push(o),r.add(i))}),n}function Vt(t,n){let r=t.lastIndexOf(w);return r<0?n.name:`${t.slice(0,r)}${w}${n.name}`}function it(t,n,r){let{path:e,first:o}={path:"",first:!0,...r};for(let[i,a]of A(t)){let s=kt(i);if(typeof a=="string"){n(`${e}${s.name}`,s,et(a));continue}if(o){it(a,n,{path:"",first:!1});continue}it(a,n,{path:`${e}${s.name}${w}`,first:!1})}}function Fn(t,n,r){if(!n[t])return t;let e={score:0,variant:void 0};for(let o of n[t]){let i=jn(o,r);i>e.score&&(e.score=i,e.variant=o)}return e.variant?Vt(t,e.variant):t}function jn(t,n){let r=0;if(n)for(let{name:e,value:o}of t.properties){let i=n[e];i!=null&&(typeof i=="string"&&i===o&&(r+=1),typeof i=="number"&&typeof o=="number"&&(r+=Math.abs(1/(i-o))))}else t.properties.length===0&&(r+=1);return r}function bn(t,n){let r=et(t);if(r.length===0)return t;let e=t;for(let{name:o,default:i,formatters:a,range:s}of r){if(!n||!n[o]){if(i===void 0){e=U(e,s[0],s[1],"");continue}e=U(e,s[0],s[1],_t(i,a,n));continue}e=U(e,s[0],s[1],_t(n[o],a,n))}return e}function _t(t,n,r,e=d.formatters){return String(n.reduce((o,{name:i,arguments:a})=>e[i]?e[i](o,...a.map(s=>s.getter(r))):o,t))}function Mt(t,n=d.langCode,r=d.translations){if(typeof r[n][t]=="string")return r[n][t];let e=Dn(t).reduce((o,i)=>{if(o!==void 0)return typeof o=="string"?o:o[i]},r[n]);return typeof e!="string"?t:e}function Dn(t){let n=M(W,t);if(!n)return t.split(w);let{match:r,range:e}=n,o="{-}";return U(t,e[0],e[0]+r[0].length,o).split(w).map(i=>i.replace(o,r[0]))}async function st({config:t,injectScript:n},r=""){let e=Un(t.root),o=await Ot(e,r),i=Ft(e,o);y(o.routeTranslations,i.routeTranslations),y(o.translations,i.translations);let a=JSON.stringify(o),s=JSON.stringify(G(o.translations)),f=JSON.stringify(v(o));n("page-ssr",['import { astroI18n } from "astro-i18n"',`astroI18n.internals().init(${a}, ${s}, ${f})`].join(";"))}function kn(t=""){return{name:"astro-i18n",hooks:{"astro:config:setup":n=>st(n,t)}}}function _n(t){let n=V(t,d.langCodes);return!n&&!d.showDefaultLangCode?d.defaultLangCode:n}function le(t,n){return async r=>r.langCode?t(r):t({...r,langCode:_n(n)})}async function ce(t,{body:n}){let r=Pt(/(#+) (?: +)?([^\n]+)(?: +)?\n/g,n).map(o=>{var f;let i=((f=o.match.at(1))==null?void 0:f.length)||0,a=o.match.at(2)||"",s=$t(a);return{depth:i,slug:s,text:a}});if(!t.__renderMarkdown)return{headings:r,html:""};let e=await t.__renderMarkdown(n);return{headings:r,html:e}}export{An as appendQueryString,d as astroI18n,le as createStaticPaths,kn as default,Qt as defineAstroI18nConfig,_n as extractRouteLangCode,xn as l,ce as renderContent,Ln as t};
